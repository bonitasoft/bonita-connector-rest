<?xml version="1.0" encoding="UTF-8"?>
<definition:ConnectorDefinition xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:definition="http://www.bonitasoft.org/ns/connector/definition/6.1">
  <id>${oauth.def.id}</id>
  <version>${oauth.def.version}</version>
  <icon>rest.png</icon>
  <category icon="rest.png" id="REST"/>
  
  <!-- inputs -->
  <input name="TLS" type="java.lang.Boolean" mandatory="false" defaultValue="true"/>
  <input name="hostname_verifier" type="java.lang.String" mandatory="false"/>
  <input name="trust_store_file" type="java.lang.String" mandatory="false"/>
  <input name="trust_store_password" type="java.lang.String" mandatory="false"/>
  <input name="key_store_file" type="java.lang.String" mandatory="false"/>
  <input name="key_store_password" type="java.lang.String" mandatory="false"/>
  <input name="auth_type" type="java.lang.String" defaultValue="OAUTH2 (Client Credentials)"/>
  <input name="oauth2_token_endpoint" type="java.lang.String" mandatory="false"/>
  <input name="oauth2_client_id" type="java.lang.String" mandatory="false"/>
  <input name="oauth2_client_secret" type="java.lang.String" mandatory="false"/>
  <input name="oauth2_scope" type="java.lang.String" mandatory="false"/>
  <input name="oauth2_code" type="java.lang.String" mandatory="false"/>
  <input name="oauth2_code_verifier" type="java.lang.String" mandatory="false"/>
  <input name="oauth2_redirect_uri" type="java.lang.String" mandatory="false"/>
  <input name="proxy_protocol" type="java.lang.String"/>
  <input name="proxy_host" type="java.lang.String"/>
  <input name="proxy_port" type="java.lang.Integer"/>
  <input name="proxy_username" type="java.lang.String"/>
  <input name="proxy_password" type="java.lang.String"/>
  <input name="automatic_proxy_resolution" type="java.lang.Boolean" mandatory="false"/>
  <input name="socket_timeout_ms" type="java.lang.Integer" defaultValue="60000"/>
  <input name="connection_timeout_ms" type="java.lang.Integer" defaultValue="60000"/>
  <input name="trust_strategy" type="java.lang.String" mandatory="false" defaultValue="DEFAULT"/>
  
  <!-- outputs -->
  <output name="token" type="java.lang.String"/>
  
  <!-- pages -->
  <page id="Advanced">
	<widget xsi:type="definition:Text" id="socket_timeout_ms_widget" inputName="socket_timeout_ms"/>
	<widget xsi:type="definition:Text" id="connection_timeout_ms_widget" inputName="connection_timeout_ms"/>
  </page>
  <page id="authenticationPage">
    <widget xsi:type="definition:RadioGroup" id="auth_type_radio" inputName="auth_type">
      <choices>OAUTH2 (Client Credentials)</choices>
      <choices>OAUTH2 (Authorization Code)</choices>
    </widget>
    <widget xsi:type="definition:Group" id="auth_oauth2_client_cred_group" optional="false">
      <widget xsi:type="definition:Text" id="oauth2_token_endpoint_widget" inputName="oauth2_token_endpoint"/>
      <widget xsi:type="definition:Text" id="oauth2_client_id_widget" inputName="oauth2_client_id"/>
      <widget xsi:type="definition:Password" id="oauth2_client_secret_widget" inputName="oauth2_client_secret"/>
      <widget xsi:type="definition:Text" id="oauth2_scope_widget" inputName="oauth2_scope"/>
    </widget>
    <widget xsi:type="definition:Group" id="auth_oauth2_authcode_group" optional="false">
      <widget xsi:type="definition:Text" id="oauth2_token_endpoint_authcode_widget" inputName="oauth2_token_endpoint"/>
      <widget xsi:type="definition:Text" id="oauth2_client_id_authcode_widget" inputName="oauth2_client_id"/>
      <widget xsi:type="definition:Password" id="oauth2_client_secret_authcode_widget" inputName="oauth2_client_secret"/>
      <widget xsi:type="definition:Text" id="oauth2_code_widget" inputName="oauth2_code"/>
      <widget xsi:type="definition:Text" id="oauth2_code_verifier_widget" inputName="oauth2_code_verifier"/>
      <widget xsi:type="definition:Text" id="oauth2_redirect_uri_widget" inputName="oauth2_redirect_uri"/>
    </widget>
  </page>
  <page id="SSLPage">
    <widget xsi:type="definition:Group" id="ssl" optional="false">
      <widget xsi:type="definition:Checkbox" id="TLS_widget" inputName="TLS"/>
      <widget xsi:type="definition:Text" id="trust_certificate_strategy_widget" inputName="trust_strategy"/>
      <widget xsi:type="definition:Text" id="hostname_verifier_widget" inputName="hostname_verifier" />
    </widget>
    <widget xsi:type="definition:Group" id="trust_store" optional="false">
      <widget xsi:type="definition:Text" id="trust_store_file_widget" inputName="trust_store_file"/>
      <widget xsi:type="definition:Password" id="trust_store_password_widget" inputName="trust_store_password"/>
    </widget>
    <widget xsi:type="definition:Group" id="key_store" optional="false">
      <widget xsi:type="definition:Text" id="key_store_file_widget" inputName="key_store_file"/>
      <widget xsi:type="definition:Password" id="key_store_password_widget" inputName="key_store_password"/>
    </widget>
  </page>
  <page id="proxyPage">
    <widget xsi:type="definition:Checkbox" id="automatic_proxy_resolution_widget" inputName="automatic_proxy_resolution"/>
	<widget xsi:type="definition:Select" id="proxy_protocol_widget" inputName="proxy_protocol">
	  <items>HTTP</items>
	  <items>HTTPS</items>
	  <items>SOCKS</items>
	 </widget>
	<widget xsi:type="definition:Text" id="proxy_host_widget" inputName="proxy_host"/>
	<widget xsi:type="definition:Text" id="proxy_port_widget" inputName="proxy_port"/>
	<widget xsi:type="definition:Text" id="proxy_username_widget" inputName="proxy_username"/>
	<widget xsi:type="definition:Password" id="proxy_password_widget" inputName="proxy_password"/>
  </page>
</definition:ConnectorDefinition>